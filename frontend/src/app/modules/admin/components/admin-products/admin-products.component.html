<div class="admin-products">
  <!-- Header avec bouton Add -->
  <div class="products-header">
    <h2>Gestion des Produits</h2>
    <button class="btn btn-primary" (click)="addProduct()">
      <span class="btn-icon">‚ûï</span>
      Ajouter un produit
    </button>
  </div>

  <!-- Table Products -->
  <div class="products-table">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Image</th>
          <th>Nom</th>
          <th>Prix</th>
          <th>Stock</th>
          <th>Cat√©gorie</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of filteredProducts">
          <td>{{ product.id }}</td>
          <td class="product-image-cell">
            <span class="product-emoji">{{ product.image }}</span>
          </td>
          <td>{{ product.name }}</td>
          <td>‚Ç¨{{ product.price.toFixed(2) }}</td>
          <td [ngClass]="{'low-stock': product.stock < 10, 'out-of-stock': product.stock === 0, 'in-stock': product.stock >= 10}">
            {{ product.stock }}
          </td>
          <td>{{ product.category }}</td>
          <td class="actions">
            <button class="btn btn-sm btn-edit" (click)="editProduct(product)" title="Modifier">
              ‚úèÔ∏è
            </button>
            <button class="btn btn-sm btn-delete" (click)="deleteProduct(product)" title="Supprimer">
              üóëÔ∏è
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination" *ngIf="totalPages > 1">
    <button class="btn-pagination" [disabled]="currentPage === 1" (click)="prevPage()">
      ‚¨ÖÔ∏è Pr√©c√©dent
    </button>
    
    <div class="page-numbers">
      <button 
        *ngFor="let page of [].constructor(totalPages); let i = index"
        class="page-btn"
        [class.active]="currentPage === (i + 1)"
        (click)="goToPage(i + 1)">
        {{ i + 1 }}
      </button>
    </div>
    
    <button class="btn-pagination" [disabled]="currentPage === totalPages" (click)="nextPage()">
      Suivant ‚û°Ô∏è
    </button>
  </div>
</div>

<!-- Add Product Modal -->
<div class="modal-overlay" *ngIf="showAddModal" (click)="cancelModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Ajouter un produit</h3>
      <button class="modal-close" (click)="cancelModal()">‚úï</button>
    </div>
    
    <div class="modal-body">
      <form #addForm="ngForm">
        <div class="form-group">
          <label>Nom du produit</label>
          <input type="text" [(ngModel)]="productForm.name" name="name" required>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Prix (‚Ç¨)</label>
            <input type="number" [(ngModel)]="productForm.price" name="price" step="0.01" required>
          </div>
          
          <div class="form-group">
            <label>Ancien Prix (‚Ç¨)</label>
            <input type="number" [(ngModel)]="productForm.oldPrice" name="oldPrice" step="0.01">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Discount (%)</label>
            <input type="number" [(ngModel)]="productForm.discount" name="discount">
          </div>
          
          <div class="form-group">
            <label>Stock</label>
            <input type="number" [(ngModel)]="productForm.stock" name="stock" required>
          </div>
        </div>
        
        <div class="form-group">
          <label>Image (emoji)</label>
          <select [(ngModel)]="productForm.image" name="image">
            <option value="üì±">üì± T√©l√©phone</option>
            <option value="üíª">üíª Laptop</option>
            <option value="‚åö">‚åö Montre</option>
            <option value="üéß">üéß Casque</option>
            <option value="üì∑">üì∑ Appareil photo</option>
            <option value="ü§ñ">ü§ñ Robot</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Cat√©gorie</label>
          <select [(ngModel)]="productForm.category" name="category">
            <option value="√âlectronique">√âlectronique</option>
            <option value="Maison">Maison</option>
            <option value="Mode">Mode</option>
          </select>
        </div>
      </form>
    </div>
    
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="cancelModal()">Annuler</button>
      <button class="btn btn-primary" (click)="saveProduct()">Ajouter</button>
    </div>
  </div>
</div>

<!-- Edit Product Modal -->
<div class="modal-overlay" *ngIf="showEditModal" (click)="cancelModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Modifier le produit</h3>
      <button class="modal-close" (click)="cancelModal()">‚úï</button>
    </div>
    
    <div class="modal-body">
      <form #editForm="ngForm">
        <div class="form-group">
          <label>Nom du produit</label>
          <input type="text" [(ngModel)]="productForm.name" name="name" required>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Prix (‚Ç¨)</label>
            <input type="number" [(ngModel)]="productForm.price" name="price" step="0.01" required>
          </div>
          
          <div class="form-group">
            <label>Ancien Prix (‚Ç¨)</label>
            <input type="number" [(ngModel)]="productForm.oldPrice" name="oldPrice" step="0.01">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Discount (%)</label>
            <input type="number" [(ngModel)]="productForm.discount" name="discount">
          </div>
          
          <div class="form-group">
            <label>Stock</label>
            <input type="number" [(ngModel)]="productForm.stock" name="stock" required>
          </div>
        </div>
        
        <div class="form-group">
          <label>Image (emoji)</label>
          <select [(ngModel)]="productForm.image" name="image">
            <option value="üì±">üì± T√©l√©phone</option>
            <option value="üíª">üíª Laptop</option>
            <option value="‚åö">‚åö Montre</option>
            <option value="üéß">üéß Casque</option>
            <option value="üì∑">üì∑ Appareil photo</option>
            <option value="ü§ñ">ü§ñ Robot</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Cat√©gorie</label>
          <select [(ngModel)]="productForm.category" name="category">
            <option value="√âlectronique">√âlectronique</option>
            <option value="Maison">Maison</option>
            <option value="Mode">Mode</option>
          </select>
        </div>
      </form>
    </div>
    
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="cancelModal()">Annuler</button>
      <button class="btn btn-primary" (click)="saveProduct()">Sauvegarder</button>
    </div>
  </div>
</div>