<div class="product-detail-container" *ngIf="product">
  <!-- Bouton retour -->
  <div class="back-button">
    <button (click)="goBack()" class="btn-back">
      ‚Üê Retour
    </button>
  </div>

  <!-- Bandeau d'offre limit√©e -->
  <div class="offer-banner" *ngIf="product.badge">
    <div class="offer-content">
      <span class="offer-text">{{ product.badge }}</span>
      <span class="offer-discount">-{{ product.discount }}%</span>
    </div>
  </div>

  <div class="product-detail-content">
    <!-- Image du produit -->
    <div class="product-image-section">
      <div class="product-image">
        <span class="product-emoji">{{ product.image }}</span>
      </div>
    </div>

    <!-- Informations du produit -->
    <div class="product-info-section">
      <!-- Nom et √©valuation -->
      <div class="product-header">
        <h1 class="product-name">{{ product.name }}</h1>
        <div class="product-rating">
          <span class="stars">{{ generateStars(product.rating) }}</span>
          <span class="rating-value">{{ product.rating }}</span>
          <span class="reviews">({{ product.reviews }} avis)</span>
        </div>
      </div>

      <!-- Description -->
      <div class="product-description" *ngIf="product.description">
        <p>{{ product.description }}</p>
      </div>

      <!-- Prix -->
      <div class="product-pricing">
        <div class="current-price">
          <span class="price-symbol">‚Ç¨</span>
          <span class="price-value">{{ getCurrentPrice() | number:'1.2-2' }}</span>
        </div>
        <div class="old-price" *ngIf="product.oldPrice > product.price">
          <span class="old-price-value">{{ product.oldPrice | number:'1.2-2' }}‚Ç¨</span>
          <span class="savings">√âconomisez {{ getSavings() | number:'1.2-2' }}‚Ç¨</span>
        </div>
      </div>

      <!-- Variantes -->
      <div class="product-variants" *ngIf="product.variants">
        <div class="variant-group" *ngFor="let variant of product.variants">
          <h3 class="variant-title">{{ variant.type }}</h3>
          <div class="variant-options">
            <button 
              *ngFor="let option of variant.options"
              class="variant-option"
              [class.selected]="selectedVariants[variant.type] === option"
              (click)="selectVariant(variant.type, option)">
              {{ option }}
            </button>
          </div>
        </div>
      </div>

      <!-- Offres exclusives -->
      <div class="product-offers" *ngIf="product.offers">
        <h3 class="offers-title">Offres exclusives</h3>
        <div class="offers-list">
          <div 
            *ngFor="let offer of product.offers"
            class="offer-item"
            [class.selected]="selectedQuantity === offer.quantity"
            (click)="selectQuantity(offer.quantity)">
            <div class="offer-quantity">{{ offer.quantity }} unit√©{{ offer.quantity > 1 ? 's' : '' }}</div>
            <div class="offer-price">{{ offer.price | number:'1.2-2' }}‚Ç¨</div>
            <div class="offer-discount" *ngIf="offer.discount > 0">-{{ offer.discount }}%</div>
          </div>
        </div>
      </div>

      <!-- Boutons d'achat -->
      <div class="product-actions">
        <button class="btn-buy-now" (click)="buyNow()">
          Comprar Ahora
        </button>
        <button class="btn-add-cart" (click)="addToCart()">
          A√±adir al Carrito
        </button>
      </div>

      <!-- D√©tails suppl√©mentaires -->
      <div class="product-details">
        <div class="detail-item" *ngIf="product.delivery">
          <span class="detail-icon">üöö</span>
          <span class="detail-text">{{ product.delivery }}</span>
        </div>
        <div class="detail-item" *ngIf="product.warranty">
          <span class="detail-icon">üõ°Ô∏è</span>
          <span class="detail-text">{{ product.warranty }}</span>
        </div>
        <div class="detail-item" *ngIf="product.security">
          <span class="detail-icon">üîí</span>
          <span class="detail-text">{{ product.security }}</span>
        </div>
      </div>

      <!-- R√©sum√© de commande -->
      <div class="order-summary" *ngIf="selectedQuantity > 1">
        <h4>R√©sum√© de votre commande</h4>
        <div class="summary-line">
          <span>{{ product.name }} ({{ selectedQuantity }}x)</span>
          <span>{{ getCurrentPrice() * selectedQuantity | number:'1.2-2' }}‚Ç¨</span>
        </div>
        <div class="summary-line total" *ngIf="getTotalSavings() > 0">
          <span>√âconomies totales</span>
          <span class="savings-total">-{{ getTotalSavings() | number:'1.2-2' }}‚Ç¨</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Message si produit non trouv√© -->
<div class="product-not-found" *ngIf="!product">
  <h2>Produit non trouv√©</h2>
  <p>Le produit que vous recherchez n'existe pas.</p>
  <button (click)="goBack()" class="btn-back">Retour √† l'accueil</button>
</div>
